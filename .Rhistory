library(NBAr)
library(NBAr)
writePG
?NBAe
?NBAr
??NBAr
install.packages("roxygen2")
library(roxygen2)
library(NBAr)
??NBAr
anrm <- function(y){
b <- y*(maxp-minp)+minp
return(b)
}
nrm <- function(x){
if(min(x,na.rm = T) == max(x, na.rm = T)){
return(min(x,na.rm = T))
}else{
a <- (x-min(x,na.rm = T))/(max(x, na.rm = T)-min(x,na.rm = T))
return(a)
}
}
trick <- function(x){
nnet <- neuralnet::neuralnet(f,data = finald[1:nrow(finald)-1,]
,hidden = ceiling((length(model_cols)+1)/2)
,rep=1
,threshold = 0.04
,stepmax = 1e6
,act.fct = "logistic"
,algorithm = "rprop+"
,linear.output = T)
msenn0 <- sum((as.numeric(unlist(nnet$response))
- as.numeric(unlist(nnet$net.result)))^2)/(nrow(finald)-1)
sw0 <- nnet$startweights
w0 <- nnet$weights
gw0 <- nnet$generalized.weights
return(list(msenn0,sw0,w0,gw0))
}
source("./magisterka/playergamesf.R")
source("./magisterka/garfun.R")
library(ggplot2)
library(reshape2)
library(dplyr)
library(jsonlite)
library(neuralnet)
library(doParallel)
#setwd("/home/osboxes/Documents")
schedule <- readRDS("./magisterka/schedule.rds")
shotchart_nogt <- readRDS("./magisterka/shotchart_nogt.rds")
player_list <- readRDS("./magisterka/player_list.rds")
team_list <- readRDS("./magisterka/team_list.rds")
team_list[team_list$abr == "PHO", "abr"] = "PHX"
boxscore_all <- readRDS("./magisterka/boxscore_all.rds")
load("./magisterka/player_cluster.rds")
load("./magisterka/playtypes.rds")
load("./magisterka/teamDefs.rds")
load("./magisterka/team_defs_abbr.RData")
pbp <- readRDS("./magisterka/pa.rds")
bsa<- boxscore_all
player_cluster$playeroff <- trimws(gsub("^\\S+","",player_cluster$PLAYER_NAME))
s <- as.data.frame(shotchart_nogt, stringsAsFactors = F)
s$PLAYER_NAME <- as.character(s$PLAYER_NAME)
s <- left_join(s,player_cluster, by = c("PLAYER_NAME" = "PLAYER_NAME"))
install.packages("roxygen2")
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
readRDS("D:\\Dropbox\\R programmin\\nba16\\teamlist.RDS")
teamlist <- readRDS("D:\\Dropbox\\R programmin\\nba16\\teamlist.RDS")
colnames(teamlist)[3] <- "TEAM_ABBREVIATION"
saveRDS(teamlist,"D:\\Dropbox\\R programmin\\nba16\\teamlist.RDS")
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
stra <- "blabla.RDS"
?grepl
grepl(".RDS",stra, ignore.case = T)
grepl(".rds",stra, ignore.case = T)
season = "2016-17"
url <- paste("http://stats.nba.com/stats/shotchartdetail?CFID=33&CFPARAMS=",season,"&ContextFilter=&ContextMeasure=FGA&DateFrom=&DateTo=&GameID=&GameSegment=&LastNGames=0&LeagueID=00&Location=&MeasureType=Base&Month=0&OpponentTeamID=0&Outcome=&PaceAdjust=N&PerMode=PerGame&Period=0&PlayerID=",playerID,"&PlusMinus=N&PlayerPosition=&Rank=N&RookieYear=&Season=",season,"&SeasonSegment=&SeasonType=Regular+Season&TeamID=0&VsConference=&VsDivision=&mode=Advanced&showDetails=0&showShots=1&showZones=0", sep="")
playerID <- 203932
url <- paste("http://stats.nba.com/stats/shotchartdetail?CFID=33&CFPARAMS=",season,"&ContextFilter=&ContextMeasure=FGA&DateFrom=&DateTo=&GameID=&GameSegment=&LastNGames=0&LeagueID=00&Location=&MeasureType=Base&Month=0&OpponentTeamID=0&Outcome=&PaceAdjust=N&PerMode=PerGame&Period=0&PlayerID=",playerID,"&PlusMinus=N&PlayerPosition=&Rank=N&RookieYear=&Season=",season,"&SeasonSegment=&SeasonType=Regular+Season&TeamID=0&VsConference=&VsDivision=&mode=Advanced&showDetails=0&showShots=1&showZones=0", sep="")
url <- paste("http://stats.nba.com/stats/shotchartdetail?CFID=33&CFPARAMS=",season,"&ContextFilter=&ContextMeasure=FGA&DateFrom=&DateTo=&GameID=&GameSegment=&LastNGames=0&LeagueID=00&Location=&MeasureType=Base&Month=0&OpponentTeamID=0&Outcome=&PaceAdjust=N&PerMode=PerGame&Period=0&PlayerID=",playerID,"&PlusMinus=N&PlayerPosition=&Rank=N&RookieYear=&Season=",season,"&SeasonSegment=&SeasonType=Regular+Season&TeamID=0&VsConference=&VsDivision=&mode=Advanced&showDetails=0&showShots=1&showZones=0", sep="")
url
season
playerID
url <- paste("http://stats.nba.com/stats/shotchartdetail?CFID=33&CFPARAMS=",season,"&ContextFilter=&ContextMeasure=FGA&DateFrom=&DateTo=&GameID=&GameSegment=&LastNGames=0&LeagueID=00&Location=&MeasureType=Base&Month=0&OpponentTeamID=0&Outcome=&PaceAdjust=N&PerMode=PerGame&Period=0&PlayerID=",playerID,"&SeasonType=Regular+Season&TeamID=0&VsConference=&VsDivision=&mode=Advanced&showDetails=0&showShots=1&showZones=0&RookieYear=&SeasonSegment=&PlayerPosition=", sep="")
url
url <- paste("http://stats.nba.com/stats/shotchartdetail?CFID=33&CFPARAMS=",season,"&ContextFilter=&ContextMeasure=FGA&DateFrom=&DateTo=&GameID=&GameSegment=&LastNGames=0&LeagueID=00&Location=&MeasureType=Base&Month=0&OpponentTeamID=0&Outcome=&PaceAdjust=N&PerMode=PerGame&Period=0&PlayerID=",playerID,"&SeasonType=Regular+Season&TeamID=0&VsConference=&VsDivision=&mode=Advanced&showDetails=0&showShots=1&showZones=0&RookieYear=&SeasonSegment=&PlayerPosition=", sep="")
web_page <- readLines(url,warn = F)
x1 <- gsub("[\\{\\}\\]]", "", web_page, perl=TRUE)
x2 <- gsub("[\\[]", "\n", x1, perl=TRUE)
x3 <- gsub("\"rowSet\":\n", "", x2, perl=TRUE)
x4 <- gsub(";", ",",x3, perl=TRUE)
shot_chart<-read.table(textConnection(x4), header=T, sep=",", skip=2, stringsAsFactors=FALSE, fill = TRUE, row.names = NULL)
shot_chart2 <- shot_chart[shot_chart$GRID_TYPE == 'Shot Chart Detail', -c(1,22)]
View(shotchart2)
View(shot_chart2)
shot_chart2[,which(colnames(chot_chart2) != "x")]
shot_chart2 <- shot_chart2[,which(colnames(schot_chart2) != "x")]
shot_chart2 <- shot_chart2[,which(colnames(shot_chart2) != "x")]
shot_chart2 <- shot_chart2[,which(colnames(shot_chart2) != "X")]
View(shot_chart)
getShotchart <- function(playerID, season = "2016-17"){
tryCatch({
url <- paste("http://stats.nba.com/stats/shotchartdetail?CFID=33&CFPARAMS=",season,"&ContextFilter=&ContextMeasure=FGA&DateFrom=&DateTo=&GameID=&GameSegment=&LastNGames=0&LeagueID=00&Location=&MeasureType=Base&Month=0&OpponentTeamID=0&Outcome=&PaceAdjust=N&PerMode=PerGame&Period=0&PlayerID=",playerID,"&SeasonType=Regular+Season&TeamID=0&VsConference=&VsDivision=&mode=Advanced&showDetails=0&showShots=1&showZones=0&RookieYear=&SeasonSegment=&PlayerPosition=", sep="")
web_page <- readLines(url,warn = F)
x1 <- gsub("[\\{\\}\\]]", "", web_page, perl=TRUE)
x2 <- gsub("[\\[]", "\n", x1, perl=TRUE)
x3 <- gsub("\"rowSet\":\n", "", x2, perl=TRUE)
x4 <- gsub(";", ",",x3, perl=TRUE)
shot_chart<-read.table(textConnection(x4), header=T, sep=",", skip=2, stringsAsFactors=FALSE, fill = TRUE, row.names = NULL)
shot_chart2 <- shot_chart[shot_chart$GRID_TYPE == 'Shot Chart Detail', -c(1,22)]
shot_chart2 <- shot_chart2[,which(colnames(shot_chart2) != "X")]
return(shot_chart2)}, error=function(e) NULL)
}
getShotchart(playerID,"2017-18")
getShotchart(playerID,"2016-18")
getShotchart(121324,"2016-18")
gameID="0021500001"
season="2015-16"
url <- paste("http://stats.nba.com/stats/boxscoreadvancedv2?EndPeriod=10&EndRange=28800&GameID=",gameID,"&RangeType=0&Season=",season,"&SeasonType=Regular+Season&StartPeriod=1&StartRange=0", sep = "")
url
url <- paste("http://stats.nba.com/stats/boxscoreadvancedv2?EndPeriod=10&EndRange=28800&GameID=",gameID,"&RangeType=0&Season=",season,"&SeasonType=Regular+Season&StartPeriod=1&StartRange=0", sep = "")
web_page <- readLines(url,warn = F)
x1 <- gsub("[\\{\\}\\]]", "", web_page, perl=TRUE)
x2 <- gsub("[\\[]", "\n", x1, perl=TRUE)
x3 <- gsub("\"rowSet\":\n", "", x2, perl=TRUE)
x4 <- gsub(";", "|",x3, perl=TRUE)
bs<- read.table(textConnection(x4), header=T, sep=",", skip=2, stringsAsFactors=FALSE, fill = TRUE)
bsb <- bs[ grepl("[[:digit:]]", bs$PLAYER_ID) == TRUE,  names(bs) != "X"]
bsb[bsb[,] == "null"] = NA
bsb[bsb[,] == ""] = NA
bsb[,10:ncol(bsb)] <- sapply(bsb[,10:ncol(bsb)], as.numeric)
bsb$MINS <- as.numeric(minute(ms(bsb[,9])))
bsb$SECS <- as.numeric(second(ms(bsb[,9])))
bsb <- bsb[,-9]
require(lubridate)
bsb$MINS <- as.numeric(minute(ms(bsb[,9])))
bsb$SECS <- as.numeric(second(ms(bsb[,9])))
bsb <- bsb[,-9]
View(bsb)
url <- paste("http://stats.nba.com/stats/playbyplay?GameID=", gameID, "&StartPeriod=0&EndPeriod=14", sep="")
url
season
season <- 2016
playtype <- "PostTouch"
type = "offensive"
substring(season,3,2)
substring(season,1,2)
substring(season,3,2)
substring(season,3,4)
paste(season, substring(season,3,4)+1,sep)
seasonid <- paste(season, as.numeric(substring(season,3,4))+1,sep="-")
seasonid
url <- paste("http://stats.nba.com/stats/leaguedashptstats?College=&Conference=&%20Country=&DateFrom=&DateTo=&Division=&DraftPick=&DraftYear=%20&GameScope=&Height=&LastNGames=0&LeagueID=00&Location=&Month=0&OpponentTeamID=0&Outcome=&PORound=0%20&PerMode=PerGame&PlayerExperience=&PlayerOrTeam=Player&PlayerPosition=&PtMeasureType=",playtype,"&Season=",seasonid,"&SeasonSegment=&SeasonType=Regular+Season&StarterBench=%20&TeamID=0&VsConference=&VsDivision=&Weight=", sep = "")
url
url <- paste("http://stats-prod.nba.com/wp-json/statscms/v1/synergy/player/?category=",playtype,"&limit=500&name=",type,"&q=2452161&season=",season,"&seasonType=Reg", sep ="")
url
install.packages("roxygen2")
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
library(NBAr)
season
season <- "2016"
seasonid <- paste(season, as.numeric(substring(season,3,4))+1,sep="-")
seasonid
library(NBAr)
library(NBAr)
library(NBAr)
